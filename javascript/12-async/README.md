# 异步编程

## JS 代码执行机制

JS引擎建立在**单线程**事件循环上，同一个时刻只能执行一段代码。

- 优点：实现比较简单，执行环境相对单纯。
- 缺点：如果任务耗时很长，后面的任务需要等待，会拖延整个程序的执行，出现页面卡死等情况。

因此，JavaScript将任务的执行模式分为两种：同步和异步。

- 代码会被放置到**任务队列**（job queue）中，每一段准备被执行，就添加到作业队列中，JS引擎结束当前代码的执行后，**事件循环**就会执行队列中的下一个作业。
- **事件循环**（event loop）是JS引擎的一个内部处理线程，负责监控代码执行并管理任务队列，队列中的任务会从第一个一直执行到最后一个。

### 异步的实现方案

- 回调
- 事件监听
- 发布/订阅
- Promise
- async/await



## 事件模型

- 事件触发，会向任务队列添加一个新任务，事件处理程序直到事件触发时才会被执行。
- 多个分离异步调用串联在一起，处理就会比较麻烦，需要跟踪每个事件的事件对象等。

## 回调模式

- 回调函数模式类似于事件模型，异步代码会在后面的一个时间点才执行，区别在于回调模式中被调用的函数（即回调函数）是作为参数传入。
- 错误优先（error-first）的回调风格。
- 回调模式比事件模型更灵活，因为通过回调模式链接多个调用更容易。但是，嵌套多层回调函数时，会陷入回调地狱。



## 参考链接

[异步解决方案----Promise与Await](https://github.com/ljianshu/Blog/issues/13)

[JavaScript 异步 - jsliang](https://github.com/LiangJunrong/document-library/blob/master/系列-面试资料/JavaScript/异步系列/README.md#chapter-three)

