# 数组

## 概念

数组（Array）是一种线性表数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。

## 随机访问

由于数组的这些特性，数组可以实现随机访问。通过索引，可以直接获取值，时间复杂度为O(1)。

在C语言等语言中，数组越界有不同的处理方案，会造成不同的后果，代码中要避免出现数组越界的情况。

**为什么大多数编程语言中，数组要从 0 开始编号，而不是从 1 开始呢？**

a[k]的内存地址公式：

```
a[k]_address = base_address + k * type_size
```

客观原因：如果数组索引从1开始，则计算公式的 k 变为 k+1 ，每次取值时要多进行一次加法运算。为了尽量优化性能，数组索引是从0开始的。

历史原因：C语言设计时，数组索引从0开始的。后面其他语言在设计时，也沿用了该习惯。也有不是从0计数的，如Matlab；还有负数的索引，如Python。

## 优缺点分析

- 数组这种结构比较适合于查找，知道索引位置的话，取值的时间复杂度为O(1)。

- 插入、删除值比较低效，平均时间复杂度为O(n)。
  如果数组是无序的，插入可以进行优化：插入所对应的原索引值直接添加到数组尾部。删除的优化：将删除的值进行标记，在数组空间将满时，统一进行删除。其实这就是JVM的垃圾回收机制。
- 扩容问题。数组定义时需要指定大小，分配连续的内存空间。当存储内容超过了一定范围，需要进行扩容操作，此时要重新分配一块更大的空间，将原来的数据复制过去。扩容操作涉及内存申请和数据搬移，是比较耗时的。



## 参考链接

[05 | 数组：为什么很多编程语言中数组都从0开始编号？](https://time.geekbang.org/column/article/40961)

