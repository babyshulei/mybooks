# ETag

> 2018-12-19 @wsl

首部字段 ETag 能告知客户端实体标识。 它是一种可将资源以字符串形式做唯一性标识的方式。 服务器会为每份资源分配对应的 ETag 值。

```
ETag: "82e22293907ce725faf67773957acd12" 
```

另外， 当资源更新时， ETag 值也需要更新。 生成 ETag 值时， 并没有统一的算法规则， 而仅仅是由服务器来分配。 

资源被缓存时， 就会被分配唯一性标识。 例如， 当使用中文版的浏览器访问 http://www.google.com/ 时， 就会返回中文版对应的资源， 而使用英文版的浏览器访问时， 则会返回英文版对应的资源。 两者的URI 是相同的， 所以仅凭 URI 指定缓存的资源是相当困难的。 若在下载过程中出现连接中断、 再连接的情况， 都会依照 ETag 值来指定资源。

## 强 Etag 值和弱 Etag 值

ETag 中有强 ETag 值和弱 ETag 值之分。

- 强 ETag 值

  强 ETag 值， 不论实体发生多么细微的变化都会改变其值。 

  ```
  ETag: "usagi-1234"
  ```

- 弱 ETag 值

  弱 ETag 值只用于提示资源是否相同。 只有资源发生了根本改变， 产生差异时才会改变 ETag 值。 这时， 会在字段值最开始处附加 W/。 

  ```
  ETag: W/"usagi-1234"
  ```

