# Proxy

> 2019.12.03 @wsl

## 正向代理



### 例子

X：用户计算机，或计算机上的客户端。

Y：代理网站

Z：用户想要访问的网站

通常，网络连接是直接 X -> Z。然而，某些场景下，需要 Y 代表 X，去访问Z，连接变为 X -> Y -> Z。

**需要正向代理可能的原因：**

X不能访问Z可能是因为：

1）对X的互联网连接具有管理权限的人已决定禁止对站点Z的所有访问。

- 某网站有病毒，为了防止用户中病毒，系统管理员禁止了该网站的访问。
- 为了防止员工工作时在社交网络花费过长时间，禁止员工访问社交网络。
- 学校禁止学生访问游戏网站。
- 政府无法控制新闻的发布，改为屏蔽网站。

2）Z的管理员已禁止X的访问。

- Z发现X在攻击网站，于是禁止了X的IP的访问。
- Z是个论坛，X发布了垃圾邮件，Z就禁止了X的访问。



## 反向代理



### 例子

X：用户计算机，或计算机上的客户端。

Y：代理网站

Z：用户想要访问的网站

通常，网络连接是直接 X -> Z。然而，某些情况下，Z网站限制or不允许直接访问，必须先访问Y。因此，X通过Y -> Z 获取数据，连接变为 X -> Y -> Z。

与正向代理不同的是，用户X不知道访问的是Z，因为X只能看到他在和Y通信。服务器Z对于客户端是不可见的，只有代理Y是外部可见的。反向代理不需要在客户端进行任何代理配置。

客户端X认为他仅与Y在通信，但实际上是Y转发所有的通信，链路为 X -> Y -> Z。

**需要反向代理可能的原因：**

1）Z 强制到其网站的所有流量首先通过Y。

- Z是一个大型的网站，但是单个Web服务器无法处理所有流量。因此，Z设置了许多服务器，并在互联网上放置了一个反向代理，当用户尝试访问Z时，会将它们发送到距离他们最近的服务器。这是内容分发网络（CDN）概念工作方式的一部分。

2）Z的管理员担心会对服务器上托管的内容进行报复，因此不希望直接向公众公开主服务器。

- 垃圾邮件的所有者似乎拥有数千台服务器，而实际上，大多数网站的服务器数量要少得多。此外，关于垃圾邮件的滥用投诉只会关闭公共服务器，而不是主服务器。



## 参考链接

 [What's the difference between a proxy server and a reverse proxy server?](https://stackoverflow.com/questions/224664/whats-the-difference-between-a-proxy-server-and-a-reverse-proxy-server)

